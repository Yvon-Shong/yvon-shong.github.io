---
title: 键盘摄影（一）——相机成像基本元件
date: 2020-05-06 12:00:00
categories: tech
tags: photography
toc: true
---

笔者在就读本科期间，开始接触计算机视觉领域，主要包括传统的图像处理，研究生期间开始了解深度学习，三维重建和SLAM（同时定位和建图）。可是对于其中使用到的最重要的传感器，相机，它的成像原理知之甚少，照片是怎么成像的？有幸在工作之余玩起了胶片相机，学习了一些摄影知识，在此和大家分享相关知识，欢迎友好地指正和勘误，轻喷。

<!-- more -->


随着器件的发展，目前的相机类型丰富，我们可以从基本的元件讲起，主要涉及到胶片相机和以单反为例的数码相机。为了便于理解，我们首先来过一遍相机的组成结构，后续会针对性进行讲解。


![按下快门按钮前的状态](https://pic1.zhimg.com/80/v2-8ac345bcf2ae7c7183b57154c68c5f50_720w.jpg)
> 按下快门按钮前的状态

![按下快门按钮后的状态](https://pic2.zhimg.com/80/v2-d73ce9e750fb75596f8b1b3da21597b9_720w.jpg)
> 按下快门按钮后的状态

上图是单反相机的结构示意图，包含镜头组组成的镜头，45 度角倾斜放置的反光板，能获得正像且放缩到取景器大小的五棱镜，焦平面快门，和成像元件。

按下快门按钮前，光线通过镜头组和反光板（单反即意味着单个反光板），垂直入射到五棱镜的一面，然后由于五棱镜的特殊结构，光线再次垂直射出五棱镜的另一面，通过取景器到达人眼。

按下快门按钮后，反光板抬起，焦平面快门卷起，光线通过镜头组照射到成像元件（CMOS）而成像，这就是单反相机的一次成像过程。

我们接下来主要会介绍的是镜头、光圈和快门。

# 镜头

高中物理时大家都曾学过，我们通过不同的凹凸透镜的组合，距离的调整，可以得到不同的镜头组。使用镜头组便实现了把特定的光线传递到成像元件面前。

## 镜头类型
相机的镜头根据焦距是否可变，分为变焦镜头和定焦镜头。

1. **光学变焦**镜头的变焦原理是，变动镜头之间的距离改变镜头组的焦距，从而得到不同宽窄的视场角和不同大小的焦距。
1. **数码变焦**的原理是直接对图片进行缩放，然后像素间进行插值。

相机的镜头根据焦段，可以分为长焦镜头，标准镜头，广角镜头。它们之间没有明显的划分，只需要了解大概范围即可。

![](https://pic3.zhimg.com/80/v2-4d159888ac6bedde66529008835628c2_720w.jpg)


1. 长焦镜头：长焦镜头的焦距比较长，要比底片的对角线大得多，可以把远处的景物拍得较大而得此名。目前常见的焦距有135mm、150mm、200mm 、250mm 、300mm、500mm、1000mm 等多种。可分为中长焦镜头（150mm以内，视角在20°左右）、长焦镜头（150mm到300mm之间，视角在10°左右）、超长焦镜头（300mm以上，视角在8°以内）三种。
1. 标准镜头：标准镜头的视角从40°到55°，常见的焦距为45mm、50mm、55mm、58mm等多种规格。
1. 广角镜头：广角镜头焦距一般大于25mm，视角在90°以内；超广角镜头的焦距在16~25mm之间，视角在 90°~180°之间；
1. 鱼眼镜头：当焦距更小，小于16mm，视角超过180°，则称为鱼眼镜头，目前世界上最大的鱼眼镜头，视角可达220°，这种镜头可以得到最大的视场，由于镜头的第一片透镜像鱼眼一样突出在外面，形状像金鱼眼睛而得此名。

再加上微距、移轴、折返镜头，便差不多能涵盖了我们能遇到的所有镜头种类。

1. 微距：为了对距离极近的被摄物也能正确对焦，微距镜头通常被设计为能够拉伸得更长，以使光学中心尽可能远离感光元件，同时在镜片组的设计上，也必须注重于近距离下的变形与色差等的控制。大多数微距镜头的焦长都大于标准镜头，因此并非完全适用于一般的摄影。
1. 移轴：能通过改变镜头组相对于成像平面的光轴，来改变观察到的景物的透视关系。
1. 折返：这类镜头一般焦距很长，光线进来之后会经过一次或者几次反射，然后到达成像元件，这样一来镜头的长度会很小，因此做成非常超长焦距的镜头，也不会有很长的镜筒了。

![](https://pic1.zhimg.com/80/v2-35db8f0910c89ea0423b8b9eee2d4a40_720w.jpg)

## 变焦环
镜头组进行变焦时，需要手动转动镜头组上的一个圆环，转动它能直接改变镜头组内镜头之间的距离结构，改变镜头组的焦距。定焦镜头由于焦距固定，无法进行变焦，也就是没有变焦环。个别卡片式数码相机为电子结构自动改变镜头组，达到光学变焦极限后再进行数码变焦。

## 对焦环
大部分相机可以自动对焦，其对焦原理可以简单的概括为成像元件侧或者取景器侧有一个传感器，检测接收到的光学图像的清晰程度，如果不清晰，则用自动对焦马达小幅度整体移动镜头组，小量地改变镜头组到成像平面的距离（物距可以认为是没有变化），使得图像清晰指标最大，这便使想要清晰的物像呈现在了焦平面上。不同远近物体的像距是不同的，变焦即是“间接的”把焦平面移动到想要清晰物体的像距上。

手动对焦则是替代自动对焦马达。

# 快门
快门是照相机中控制曝光时间长短的装置, 我们通过调节快门开闭时间长短，和开启的空隙大小来调节曝光量。

在快门速度的标示序列中可以看到，如1/4、1/8、1/15、1/30 、1/60、1/125等。不难看出，它们之间是倍数关系，是指几分之一秒的曝光时间，因此通过快门的曝光量也是呈倍数关系。

快门根据开启的方式分为全局快门和卷帘快门。

## 卷帘快门
手机中的镜头就是大家很熟悉的卷帘快门，感光单元从上至下逐行曝光。全称是“电子控制纵走式焦平面快门”。

卷帘快门的逐行曝光带来了一张照片中从上到下反应的其实并不是同一个时刻时的景物状态，引起的失真称为果冻效应，在拍摄高速运动的物体时该现象尤其明显。

卷帘快门在慢速快门和高速快门下，工作方式是不一样的。

1. 慢速快门工作原理：机械快门有前后两个帘幕，后帘幕（靠近CMOS），在慢速快门下，后帘幕从下至上先打开，接着前帘幕从上至下再打开，此时光线从上至下照进传感器。再接着后帘幕从上至下关闭，光线也从上至下慢慢消失，前帘幕再关闭，结束曝光。以上步骤，可以使传感器曝光非常均匀。不会使照片产生太大的形变。
1. 高速快门工作原理：毕竟机械快门是物理结构，其运动速度不可能无限制提升，速度受到了限制。这就导致一个问题。在高速快门之下，不能依靠两个帘幕分别开关来工作。很耽误时间，于是用固定缝隙扫过感光元件的办法来实现等效“曝光时间”。

![](https://pic4.zhimg.com/80/v2-c172ce7366ece9e76fb6684d4210ba9f_720w.jpg)

![](https://pic3.zhimg.com/80/v2-55e093a41bfedc2f23d28def1dac3016_720w.jpg)

并且卷帘快门容易受到闪光同步速度的限制。闪光同步速度指相机的快门速度能够保证在闪光灯工作的时间段内，感光元件都接受到曝光。

如果相机使用的是卷帘快门，当快门速度高于临界快门速度的时候，成像元件不是全部能同时接收光线的，快门前帘和后帘打开一条缝隙，缝隙扫过成像元件完成曝光，会导致照片的曝光严重不均匀（因为闪光灯的脉冲时间非常短，在1/200s-1/500s之间，亮度随时间迅速变化的），会导致照片上只有一个窄条曝光正常，其余部分因为没有接收到足够的曝光而显得很暗。只有当相机的快门速度低于这个临界速度的时候，闪光灯才能和相机快门同步，保证成像元件的各个部分同时曝光。

## 全局快门
而“全局快门”是感光元件上所有的感光小单元同时感光实现的，因为其制作工艺比较高，且普遍用在以CCD为感光材料的设备上，而大部分设备都是使用的CMOS作为感光材料，所以使用“全局快门”的设备很少。

# 光圈
光圈是照相机镜头中控制光线的叶片装置, 调整光圈大小来调节通光量。光圈中心开口的大小代表光圈的数值，通常用f系数来表示。数值愈小，孔径的开口愈大，曝光量愈多，反之曝光量愈少。

通常在拍摄时所说的“开大光圈”, 是指把光圈的数值调小, 把光孔开大的意思, 如从F5.6调大一级到f4、或二级到f2.8等。同样,“关小光圈” , 是指把光圈的数值调大, 把光孔关小的意思, 如从f5.6关小一级到f8、或二级到f11等。

而光圈的值通常为 f1、f1.4、f2、f2.8、f4、f5.6、f8、f11、f16、f22、f32

为什么F值要依据这些毫无规律的值来衡量呢？实际上，这些数值其实是等比数列。相邻两个数字是√2倍，而√2约等于1.414。半径呈根号2倍关系，面积则呈倍数关系，通关量则也呈倍数关系。

![](https://pic2.zhimg.com/80/v2-d2a489375784f7f48905a026f8e99e05_720w.jpg)


光圈和景深有密切的关系，因为通过调整光圈的大小可以直接控制景深。在讲解景深之前，我们得先了解一个概念，弥散圆(Circle of Confusion)。

## 弥散圆
在焦点前后，光线从聚集到扩散，点的影象从圆到点（焦点），继而有扩散到圆，这个焦点前面和后面的圆就叫做弥散圆。如果弥散圆的直径小于人眼的鉴别能力，人眼将感觉是清晰的。这个可以被接受的最大直径被称为容许弥散圆直径δ (Permissible circle of confusion)。

不同的厂家、不同的底片面积都有不同的容许弥散圆直径的要求。在这里可以看出：景深是相对的，不是绝对的，和弥散圆直径 δ的取值大小有着直接的关系。弥散圆直径 δ 的取值的大小和镜头生产厂商的技术能力有关。

![](https://pic1.zhimg.com/80/v2-32851f6bc64312db582e013e6d4dcc68_720w.jpg)

在对焦时，通过镜头将在焦平面上清晰成像，而对焦点的前景和后景也在焦平面成像，只要它们成像的弥散圆等于或小于容许弥散圆直径，我们将认为是清晰的，在焦点前后各有一个容许弥散圆，这两个前后弥散圆之间的距离，我们称呼它叫焦深，它和景深是相对应的。所谓景深即：在被摄主体(对焦点)前后，其影像具有的一段清晰范围，这范围内的景物在焦平面上成像，都在容许弥散圆的限定范围内。所能清晰成像的最远部分和最近部分之间的距离。

## 景深

![](https://pic4.zhimg.com/80/v2-0db5db85426c73b5df9b7dd9043a2b4f_720w.jpg)

景深是随镜头的焦距、光圈值、对焦距离的不同而变化。在上图中，我们能之间根据透镜成像公式（物距倒数+像距倒数=焦距倒数）计算出景深和光圈的关系；

$\delta$ : 最大弥散圆直径

f: 焦距

F : 光圈，光圈 F 值 = 镜头的焦距除以光圈口径

L : 物距

前景深: $\Delta L_1 = \frac{F\delta L^2}{f^2+F\delta L}$

后景深: $\Delta L_2 = \frac{F\delta L^2}{f^2-F\delta L}$

景深: $\Delta L = \Delta L_1+\Delta L_2  = \frac{2f^2F\delta L^2}{f^4-F^2\delta^2 L^2} =\frac{2f^2\delta L^2}{\frac{f^4}{F}-\delta^2 L^2 F}$

通过公式我们可以看到，景深的分母是一个关于F值单调递减的函数，所以光圈越小，F值越大，分母越小，景深越大。

一般来说：

镜头光圈：光圈越大，景深越小；光圈越小，景深越大；
镜头焦距：镜头焦距越长，景深越小；焦距越短，景深越大；
拍摄距离：距离越远，景深越大；距离越近，景深越小。
为了要凸显被拍物，很多人会选择小的景深（即远离被拍主体的物体都会被虚化失焦）。当然如果你要拍风景，我们就会建议选择大的景深。



超焦距
当镜头对焦在无穷远时，景深前界（离镜头最近清晰点）到镜头的距离称之为超焦距。换句话说当镜头对焦在这个超焦距点时，从这个超焦距点到相机一半的距离开始到无穷远都是清晰的。

对焦到无穷远时，认为物距是无穷远：

景深前界 $d =\lim_{L \to \infty} (L - \Delta L_1 )  = \lim_{L \to \infty} (L - \frac{F\delta L^2}{f^2+F\delta L} ) = \frac{f^2}{F\delta}$

对焦到该点时计算后景深， d 带入 L ：

$\Delta L_2 = \frac{F\delta L^2}{f^2-F\delta L} = \frac{f^2}{F\delta-F\delta}$

可以看到，分母为 0，后景深趋于无穷。

而此时景深前界 $L - \Delta L_1 =\frac{d}{2}$

---

欢迎在我的专栏「[自律走行](https://www.zhihu.com/column/jiritsu-soko)」中查看更多「键盘摄影」系列文章

- [键盘摄影（一）——相机成像基本元件](https://zhuanlan.zhihu.com/p/93481287)
- [键盘摄影（二）——曝光三要素](https://zhuanlan.zhihu.com/p/138585113)
- [键盘摄影（三）——等效焦距和等效光圈](https://zhuanlan.zhihu.com/p/138585371)
- [键盘摄影（四）——相机成像元件：胶片与彩色暗房](https://zhuanlan.zhihu.com/p/139384545)
- [键盘摄影（五）——相机成像元件：CMOS/CCD](https://zhuanlan.zhihu.com/p/139394687)
- [键盘摄影（六）——相机成像模型](https://zhuanlan.zhihu.com/p/138585667)
- [键盘摄影（七）——深入理解图像信号处理器 ISP](https://zhuanlan.zhihu.com/p/139432684)
- [键盘摄影（八）——相机结构和卡口](https://zhuanlan.zhihu.com/p/263018344)
- [键盘摄影（九）——光学像差](https://zhuanlan.zhihu.com/p/263867036)